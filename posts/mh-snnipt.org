#+BEGIN_COMMENT
.. title: 梦幻西游 代码片段
.. slug: mh-snnipt
.. date: 2018-06-03
.. tags:
.. category: 梦幻西游
.. link:
.. description:
.. type: text
#+END_COMMENT


* Scene
** 创建scene
#+BEGIN_SRC lua
local scene = CCScene:create()
scene:setPosition(0, 0)
scene:setAnchorPoint(ccp(0, 0))
#+END_SRC

** 获取当前scene，替换scene
#+BEGIN_SRC lua
if (CCDirector:sharedDirector()):getRunningScene() == nil then
    (CCDirector:sharedDirector()):runWithScene(scene)
else
    (CCDirector:sharedDirector()):replaceScene(scene)
end
#+END_SRC

* UINode
** find widget
#+BEGIN_SRC lua
local logoImage = UIHelper:seekWidgetByName(parentWidget, "Logo")
logoImage:setVisible(true)
logoImage:setOpacity(255)
#+END_SRC

** run action
#+BEGIN_SRC lua
  local array = CCArray:create()
  array:addObject(CCDelayTime:create(1))
  array:addObject(CCFadeOut:create(0.33))
  array:addObject(CCCallFunc:create(function()
    -- function num : 0_0_1 , upvalues : startInst, cb
    startInst:setVisible(false)
    if cb then
      cb()
    end
  end
  ))
  local act = CCSequence:create(array)
  logoImage:runAction(act)
#+END_SRC

* 工具
** 等待
#+BEGIN_SRC lua
utils.wait_until(checkFun, taskFun)
#+END_SRC
** 显示提示框
#+BEGIN_SRC lua
utils.message_box('some note')
#+END_SRC
