## -*- coding: utf-8 -*-
<div id="sidemenu">
%if posts:
<div class="list-group">
    <% categories = {} %>
    % for post in posts:
        % if post.meta('multiver'):
            <a class="list-group-item sidemenu-item" data-name="${post.meta('slug_versioned')}" href="${post.permalink(lang)}"><span class="text-muted">v${post.meta('dirver')}/</span>${post.title(lang)|h}</a>
        % else:
            <a class="list-group-item sidemenu-item" data-name="${post.meta('slug_versioned')}" href="${post.permalink(lang)}">${post.title(lang)|h}</a>
        % endif

        % if post.meta('category') and isinstance(post.meta('category'), str):
            <% category = post.meta('category') %>
            %if category in categories:
                <% categories[category].append(post) %>
            % else:
                <% categories[category] = [] %>
                <% categories[category].append(post) %>
            % endif
        % endif
    % endfor

    % for category in categories.keys():
        <ul>${category}
            <% cat_posts = categories[category] %>
            % for post in cat_posts:
                <li>${post.title(lang)|h}</li>
            % endfor
        </ul>
    % endfor
</div>
%endif
</div>
